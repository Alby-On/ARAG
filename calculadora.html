<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
    /* --- 1. VARIABLES Y RESET --- */
    :root {
        --primary: #1D84CF;
        --secondary: #1A1A1A;
        --accent: #FFB800;
        --light: #f8fafc;
        --white: #ffffff;
        --grad: linear-gradient(135deg, #1D84CF 0%, #0a4d7a 100%);
        --shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    body { 
        font-family: 'Open Sans', 'Segoe UI', sans-serif; 
        margin: 0; 
        padding-top: 105px; /* Espacio para la navbar fija */
        background-color: var(--light); 
        color: var(--secondary);
    }

    *, *::before, *::after { box-sizing: border-box; }

    /* --- 2. NAVEGACI√ìN (NAVBAR) --- */
    .navbar {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 0 8%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 85px;
        z-index: 3000;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
    }

    .logo img { height: 50px; }

    .nav-links {
        display: flex;
        gap: 30px;
        list-style: none;
        align-items: center;
        margin: 0;
    }

    .nav-links a {
        text-decoration: none;
        color: var(--secondary);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 1px;
        transition: var(--transition);
    }

    .nav-links a:hover { color: var(--primary); }

    .btn-nav {
        background: var(--grad);
        color: white !important;
        padding: 10px 20px;
        border-radius: 50px;
    }

    .menu-toggle {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.8rem;
        color: var(--secondary);
    }

    /* --- 3. CONTENEDORES Y TABLAS --- */
    .container { 
        max-width: 1150px; 
        margin: 20px auto; 
        background: white; 
        padding: 25px; 
        border-radius: 12px; 
        box-shadow: var(--shadow); 
    }
    
    h2 { 
        color: var(--secondary); 
        text-align: center; 
        border-bottom: 3px solid var(--accent); 
        padding-bottom: 10px; 
        font-weight: 800; 
        text-transform: uppercase; 
    }
    
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #eee; padding: 12px; text-align: center; }
    
    th { 
        background: var(--grad); 
        color: white; 
        text-transform: uppercase; 
        font-size: 0.85rem; 
        letter-spacing: 1px; 
    }
    
    .total-row { background-color: #f1f8fe; font-weight: bold; color: var(--primary); font-size: 1.1em; }

    /* --- 4. BOTONES --- */
    .btn-add { 
        background: var(--accent); 
        color: var(--secondary); 
        padding: 10px 15px; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer; 
        font-weight: bold; 
        margin-bottom: 15px; 
        transition: var(--transition); 
    }
    .btn-add:hover { background: #f1a100; transform: translateY(-2px); }
    
    .btn-del { background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }

    .btn-next, .btn-siguiente-paso, .btn-finalizar {
        background: var(--accent);
        color: var(--secondary);
        border: none;
        padding: 15px 40px;
        font-size: 1.1em;
        font-weight: 800;
        border-radius: 50px;
        cursor: pointer;
        text-transform: uppercase;
        transition: var(--transition);
        display: block;
        margin: 25px auto 0;
        box-shadow: 0 10px 20px rgba(255, 184, 0, 0.2);
    }

    .btn-finalizar, .btn-next:not(.naranjo) {
        background: var(--grad);
        color: white;
    }

    .btn-next:hover, .btn-siguiente-paso:hover {
        background: #f1a100;
        box-shadow: 0 10px 25px rgba(255, 184, 0, 0.4);
    }

    /* --- 5. RESUMEN CARDS Y FORMULARIO --- */
    .resumen-container { display: flex; gap: 20px; margin-top: 30px; justify-content: space-between; }
    
    .resumen-card {
        flex: 1;
        background: white;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        border-top: 5px solid var(--primary); 
    }

    .resumen-card.highlight { border-top: 5px solid var(--accent); background: #fffcf4; }

    .resumen-valor { font-size: 2.2em; font-weight: 800; color: var(--secondary); }
    .resumen-card.highlight .resumen-valor { color: var(--primary); }

    .formulario-container {
        background: var(--grad);
        padding: 30px;
        border-radius: 15px;
        margin-top: 40px;
        color: white;
    }

    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
    
    input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ddd; font-size: 1em; }

    .formulario-container input[readonly] {
        background-color: rgba(255, 255, 255, 0.15);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
        cursor: default;
    }

    /* --- 6. PROPUESTA T√âCNICA (RECUPERADO) --- */
    .resultado-propuesta {
        background: white;
        border: 2px solid var(--primary);
        padding: 30px;
        border-radius: 20px;
        margin-top: 40px;
        box-shadow: var(--shadow);
        display: none; /* Se activa por JS */
    }

    .grid-resultados {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-top: 25px;
    }

    .item-res {
        background: var(--light);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        border-bottom: 4px solid var(--accent);
    }

    .item-res .tit { display: block; font-size: 0.85em; color: #666; font-weight: bold; margin-bottom: 5px; }
    .item-res .val { font-size: 1.5em; color: var(--secondary); font-weight: 800; }

    .total-costo { background: var(--secondary) !important; color: white; }
    .total-costo .val { color: var(--accent) !important; font-size: 1.8rem; }
    .total-costo .tit { color: rgba(255,255,255,0.8); }

    /* --- 7. FORMULARIO DE CONTACTO (RECUPERADO) --- */
    .contacto-container {
        background: white;
        padding: 40px;
        border-radius: 25px;
        border: 1px solid #eee;
        margin-top: 40px;
        box-shadow: var(--shadow);
        display: none; /* Se activa por JS */
    }

    .contacto-container h3 { 
        text-align: center; 
        color: var(--primary); 
        margin-top: 0;
        font-family: 'Montserrat', sans-serif;
    }

    .field { display: flex; flex-direction: column; margin-bottom: 15px; }
    .field label { font-size: 0.9em; font-weight: bold; margin-bottom: 5px; color: var(--secondary); }
    .field.full { grid-column: span 2; }

    /* --- 8. MEDIA QUERIES --- */
    @media (max-width: 1024px) {
        .menu-toggle { display: block; }
        .nav-links {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 85px;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .nav-links.active { display: flex; }
        .nav-links li { margin: 15px 0; text-align: center; }
    }

    @media (max-width: 768px) {
        .resumen-container { flex-direction: column; }
        .container { margin: 10px; padding: 15px; }
        .field.full { grid-column: span 1; }
        .grid-resultados { grid-template-columns: 1fr; }
    }
/* Estilo para el bot√≥n de Calculadora en la Navbar */
.nav-links a.btn-calc {
    color: var(--secondary) !important; /* Letras negras */
    border: 2px solid var(--accent);   /* Contorno amarillo (#FFB800) */
    padding: 8px 18px;
    border-radius: 50px;               /* Forma de c√°psula como el de contacto */
    transition: var(--transition);
    display: inline-block;
}

.nav-links a.btn-calc:hover {
    background-color: var(--accent);   /* Se rellena de amarillo al pasar el mouse */
    color: var(--secondary) !important;
    box-shadow: 0 4px 15px rgba(255, 184, 0, 0.3);
}

/* Ajuste para que en m√≥viles no se vea extra√±o */
@media (max-width: 1024px) {
    .nav-links a.btn-calc {
        margin: 10px 0;
        text-align: center;
        width: auto;
    }
}
/* --- 1. VARIABLES NECESARIAS --- */
    :root {
        --primary: #1D84CF;
        --secondary: #1A1A1A;
        --accent: #FFB800;
        --light: #f8fafc;
        --white: #ffffff;
        --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    /* --- 2. ESTILOS BASE --- */
    *, *::before, *::after {
        box-sizing: border-box;
    }

    body {
        margin: 0;
        font-family: 'Open Sans', sans-serif;
        line-height: 1.7;
    }

    /* --- 3. C√ìDIGO ESPEC√çFICO DEL FOOTER --- */
    footer {
        background: var(--secondary);
        color: white;
        text-align: center;
        padding: 60px 20px;
        border-top: 4px solid var(--primary);
    }

    .footer-container-centered {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 60px 0 20px;
    }

    .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 30px;
        width: 100%;
        margin-bottom: 40px;
        padding-bottom: 20px;
    }

    .footer-brand {
        display: flex;
        flex-direction: column;
        align-items: center;
        max-width: 500px;
        justify-content: center;
    }

    .footer-logo-container {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-bottom: 20px;
    }

    .footer-logo {
        height: 65px;
        width: auto;
        object-fit: contain;
        filter: brightness(0) invert(1);
        transition: transform 0.3s ease;
    }

    .footer-logo:hover { 
        transform: scale(1.05); 
    }

    .footer-brand p {
        color: #cbd5e1;
        font-size: 0.9rem;
        line-height: 1.6;
        max-width: 300px;
        margin: 0 auto;
    }

    .footer-nav {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .footer-links-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .footer-links-list li a {
        color: #cbd5e1;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 600;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .footer-links-list li a i {
        font-size: 0.7rem;
        color: var(--primary);
    }

    .footer-links-list li a:hover {
        color: var(--white);
        transform: translateX(5px);
    }

    .footer-bottom {
        width: 100%;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 20px;
        text-align: center;
        font-size: 0.85rem;
        color: #cbd5e1;
    }

    /* --- 4. RESPONSIVE (MEDIA QUERIES) --- */
    @media (min-width: 768px) {
        .footer-content {
            flex-direction: row;
            justify-content: space-around;
            align-items: center;
            text-align: left;
        }

        .footer-brand {
            justify-content: flex-start;
            align-items: flex-start;
        }

        .footer-nav {
            align-items: flex-start;
        }

        .footer-links-list li a {
            justify-content: flex-start;
        }
        
        .footer-logo {
            height: 55px;
        }
    }

    @media (max-width: 768px) {
        .footer-logo { 
            height: 40px; 
        }
    }
/* ============================= */
/* MEJORAS RESPONSIVE SEGURAS    */
/* (No eliminan nada existente)  */
/* ============================= */

/* 1Ô∏è‚É£ Asegurar escalado correcto en m√≥viles */
@media (max-width: 768px) {

    /* Ajuste navbar padding */
    .navbar {
        padding: 0 20px;
    }

    /* Ajuste espacio por navbar fija */
    body {
        padding-top: 95px;
    }

    /* Contenedores m√°s compactos */
    .container {
        margin: 10px;
        padding: 15px;
        border-radius: 10px;
    }

    /* T√≠tulos m√°s proporcionados */
    h2 {
        font-size: 1.2rem;
    }

    /* Botones grandes full width */
    .btn-next,
    .btn-siguiente-paso,
    .btn-finalizar {
        width: 100%;
        padding: 14px;
        font-size: 1rem;
    }

    /* Ajuste tarjetas resumen */
    .resumen-valor {
        font-size: 1.6em;
    }

    /* Formularios m√°s c√≥modos */
    .formulario-container {
        padding: 20px;
    }

    .contacto-container {
        padding: 20px;
    }

    /* Tablas con scroll horizontal */
    table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }

}

/* 2Ô∏è‚É£ Evitar desbordes globales */
.container {
    overflow-x: auto;
}

/* 3Ô∏è‚É£ Mejor comportamiento de im√°genes */
img {
    max-width: 100%;
    height: auto;
}
/* Estilos del Loader */
#loader-wrapper {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--white);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Por encima de todo */
    transition: opacity 0.5s ease;
}

.loader {
    width: 50px;
    height: 50px;
    border: 5px solid #f3f3f3;
    border-top: 5px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Clase para ocultar el loader con JS */
.loader-hidden {
    opacity: 0;
    visibility: hidden;
}
    /* --- 12. WHATSAPP FLOATING BUTTON --- */
    .whatsapp-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background-color: #25d366;
        color: white;
        border-radius: 50px;
        text-align: center;
        font-size: 35px;
        box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
        z-index: 3000;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: var(--transition);
        animation: pulse-wsp 2s infinite;
    }

    .whatsapp-btn:hover {
        transform: scale(1.1) translateY(-5px);
        background-color: #20ba5a;
        box-shadow: 0 15px 30px rgba(37, 211, 102, 0.5);
    }

    .whatsapp-btn:hover i {
        display: inline-block;
        animation: shake-icon 0.5s ease infinite;
    }

    .tooltip-wsp {
        position: absolute;
        right: 75px;
        background: white;
        color: var(--secondary);
        padding: 8px 15px;
        border-radius: 10px;
        font-size: 0.9rem;
        font-weight: 700;
        box-shadow: var(--shadow);
        opacity: 0;
        visibility: hidden;
        transition: var(--transition);
        white-space: nowrap;
    }

    .whatsapp-btn:hover .tooltip-wsp {
        opacity: 1;
        visibility: visible;
    }
</style>
</head>
<nav class="navbar">
    <a href="index.html" class="logo">
        <img src="aragspa.png" alt="Logo ARAG SPA Ingenier√≠a">
    </a>
    <ul class="nav-links">
        <li><a href="index.html#inicio">Inicio</a></li>
        <li><a href="index.html#nosotros">Qui√©nes Somos</a></li>
        <li><a href="index.html#servicios">Servicios</a></li>
        <li><a href="index.html#clientes">Clientes</a></li>
        <li><a href="index.html#por-que-elegirnos">¬øPor qu√© nosotros?</a></li>
        <li><a href="calculadora.html" class="btn-calc">Calculadora Solar</a></li>
        <li><a href="index.html#contacto" class="btn-nav">Contacto</a></li>
    </ul>
</nav>

<nav class="navbar moviles">
    <a href="index.html" class="logo">
        <img src="aragspa.png" alt="Logo ARAG SPA Ingenier√≠a">
    </a>

    <button class="menu-toggle" id="mobile-menu" aria-label="Abrir men√∫">
        <i class="fas fa-bars"></i>
    </button>

    <ul class="nav-links" id="nav-list">
        <li><a href="index.html#inicio">Inicio</a></li>
        <li><a href="index.html#nosotros">Qui√©nes Somos</a></li>
        <li><a href="index.html#servicios">Servicios</a></li>
        <li><a href="index.html#clientes">Clientes</a></li>
        <li><a href="index.html#por-que-elegirnos">¬øPor qu√© nosotros?</a></li>
        <li><a href="calculadora.html" class="btn-calc">Calculadora Solar</a></li>
        <li><a href="index.html#contacto" class="btn-nav">Contacto</a></li>
    </ul>
</nav>
<body>
    
<div id="loader-wrapper">
    <div class="loader"></div>
    <p>Cargando Calculadora Solar...</p>
</div>
    
<div class="container">
    <h2>Calculadora de Consumo El√©ctrico</h2>

<table id="calcTable">
    <thead>
        <tr>
            <th>Artefacto El√©ctrico</th>
            <th>N¬∞ Equipos</th>
            <th>Potencia (Watts)</th>
            <th>Tiempo de Uso</th>
            <th>kWh / D√≠a</th>
            <th>kWh / Mes</th>
            <th>Acci√≥n</th>
        </tr>
    </thead>
    <tbody id="tableBody">
        </tbody>
    <tfoot>
        <tr>
            <td colspan="7" style="text-align: left; padding: 15px;">
                <button class="btn-add" onclick="addRow()" style="margin: 0;">+ A√±adir Artefacto</button>
            </td>
        </tr>
        <tr class="total-row">
            <td colspan="4">TOTAL CONSUMO ESTIMADO</td>
            <td id="totalDia">0.000</td>
            <td id="totalMes">0.00</td>
            <td></td>
        </tr>
    </tfoot>
</table>
  <div class="resumen-container">
    <div class="resumen-card">
        <span class="resumen-label">Carga M√°xima de Trabajo</span>
        <div class="resumen-valor"><span id="totalWatts">0</span> <small>W</small></div>
        <p class="resumen-desc">Potencia total instalada</p>
    </div>
    
    <div class="resumen-card highlight">
        <span class="resumen-label">Consumo Diario</span>
        <div class="resumen-valor"><span id="resumenDia">0.00</span> <small>kWh</small></div>
        <p class="resumen-desc">Energ√≠a necesaria por d√≠a</p>
    </div>
    
    <div class="resumen-card">
        <span class="resumen-label">Consumo Mensual</span>
        <div class="resumen-valor"><span id="resumenMes">0.00</span> <small>kWh</small></div>
        <p class="resumen-desc">Energ√≠a total al mes</p>
    </div>
</div>
<div class="formulario-container">
    <h3>Casi listo: Obt√©n tu configuraci√≥n solar</h3>
    <form id="solarLeadForm">
        <div class="form-grid">
            <div class="form-group">
                <label>Tu Regi√≥n:</label>
                <select id="userRegion" required>
                    <option value="" disabled selected>Selecciona tu regi√≥n...</option>
                    <option value="6.5">Arica y Parinacota</option>
                    <option value="6.4">Tarapac√°</option>
                    <option value="6.6">Antofagasta</option>
                    <option value="6.2">Atacama</option>
                    <option value="5.8">Coquimbo</option>
                    <option value="5.2">Valpara√≠so</option>
                    <option value="5.1">Metropolitana de Santiago</option>
                    <option value="4.8">O'Higgins</option>
                    <option value="4.5">Maule</option>
                    <option value="4.2">√ëuble</option>
                    <option value="4.0">Biob√≠o</option>
                    <option value="3.8">La Araucan√≠a</option>
                    <option value="3.5">Los R√≠os</option>
                    <option value="3.2">Los Lagos</option>
                    <option value="2.8">Ays√©n</option>
                    <option value="2.5">Magallanes y la Ant√°rtica Chilena</option>
                </select>
            </div>

            <div class="form-group">
                <label>Potencia Total Instalada:</label>
                <input type="text" id="formWatts" readonly>
            </div>

            <div class="form-group">
                <label>Consumo Mensual:</label>
                <input type="text" id="formKwhMes" readonly>
            </div>
        </div>

        <button type="button" class="btn-next" onclick="nextStep()">Siguiente: Calcular Paneles ‚ûî</button>
    </form>
</div>
<div id="resultadoFinal" class="resultado-propuesta" style="display: none;">
    <h3>üìä Propuesta T√©cnica Estimada</h3>
    <div class="grid-resultados">
        <div class="item-res">
            <span class="tit">Inversor Recomendado</span>
            <span class="val" id="resInversor">0 kW</span>
        </div>
        <div class="item-res">
            <span class="tit">Paneles (Mono-PERC 580W)</span>
            <span class="val" id="resPaneles">0 Unidades</span>
        </div>
        <div class="item-res">
            <span class="tit">Banco de Bater√≠as Litio</span>
            <span class="val" id="resBaterias">0 kWh</span>
        </div>
        <div class="item-res total-costo">
            <span class="tit">Inversi√≥n Estimada (IVA Inc.)</span>
            <span class="val" id="resCosto">$0</span>
        </div>
    </div>
    <p style="font-size: 0.8em; margin-top: 15px; color: #666;">*Valores referenciales sujetos a factibilidad t√©cnica y variaciones de mercado.</p>
</div>
<div id="contactoFinal" class="contacto-container" style="display: none;">
    <h3>üöÄ ¬°Solicita tu Asesor√≠a Personalizada!</h3>
    <p>Ingresa tus datos para que un experto valide tu proyecto.</p>
    
    <form id="leadForm" class="grid-form">
        <div class="field">
            <label>Nombre</label>
            <input type="text" id="nombre" placeholder="Tu nombre" required>
        </div>
        <div class="field">
            <label>Apellido</label>
            <input type="text" id="apellido" placeholder="Tu apellido" required>
        </div>
        <div class="field">
            <label>Tel√©fono</label>
            <input type="tel" id="telefono" placeholder="+56 9 1234 5678" required>
        </div>
        <div class="field">
            <label>Comuna</label>
            <input type="text" id="comuna" placeholder="Ej: Chill√°n" required>
        </div>
        <div class="field full">
            <label>Email</label>
            <input type="email" id="email" placeholder="correo@ejemplo.com" required>
        </div>
        <div class="field full">
            <label>Horario de contacto preferido</label>
            <select id="horario">
                <option value="ma√±ana">Ma√±ana (09:00 - 13:00)</option>
                <option value="tarde">Tarde (14:00 - 18:00)</option>
                <option value="vespertino">Vespertino (18:00 - 21:00)</option>
            </select>
        </div>
        <button type="submit" class="btn-finalizar">Enviar Solicitud y Finalizar</button>
    </form>
</div>

<div id="btnPasoContacto" style="display: none; text-align: center; margin-top: 20px;">
    <button class="btn-siguiente-paso" onclick="mostrarContacto()">Continuar con mi solicitud ‚ûî</button>
</div>
</div>
<footer class="footer">
    <div class="footer-container-centered">
        <div class="footer-content">
            <div class="footer-brand">
                <div class="footer-logo-container">
                    <img src="aragspa.png" alt="Logo ARAG SPA" class="footer-logo">
                </div>
            </div>

            <div class="footer-nav">
                <ul class="footer-links-list">
                    <li><a href="index.html#inicio"><i class="fas fa-chevron-right"></i> Inicio</a></li>
                    <li><a href="index.html#nosotros"><i class="fas fa-chevron-right"></i> Qui√©nes Somos</a></li>
                    <li><a href="index.html#servicios"><i class="fas fa-chevron-right"></i> Servicios</a></li>
                    <li><a href="index.html#clientes"><i class="fas fa-chevron-right"></i> Clientes</a></li>
                    <li><a href="index.html#por-que-elegirnos"><i class="fas fa-chevron-right"></i> ¬øPor qu√© nosotros?</a></li>
                    <li><a href="calculadora.html"><i class="fas fa-chevron-right"></i> Calculador Solar</a></li>
                    <li><a href="index.html#contacto"><i class="fas fa-chevron-right"></i> Contacto</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2026 ARAG SPA Ingenier√≠a. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>
<script>
    const categorias = {
        "üîå Electrodom√©sticos": {
            "Ampolleta LED": 9, "Ampolleta incandescente": 60, "Televisor LED 32\"": 80,
            "Televisor LED 50\"": 120, "Refrigerador": 150, "Microondas": 1200,
            "Hervidor el√©ctrico": 2000, "Lavadora": 800, "Secadora de ropa": 2500,
            "Aspiradora": 1400, "Plancha": 1200, "Horno el√©ctrico": 2000, "Tostador": 800
        },
        "üíª Electr√≥nica y Oficina": {
            "Notebook": 60, "PC de escritorio": 300, "Monitor LED": 30,
            "Router WiFi": 10, "Impresora": 500, "Cargador celular": 5,
            "Consola de videojuegos": 200, "C√°mara de seguridad": 10
        },
        "üõ†Ô∏è Fuerza y Climatizaci√≥n": {
            "Taladro": 600, "Esmeril angular": 800, "Sierra circular": 1400,
            "Soldadora inverter": 3000, "Compresor de aire peque√±o": 1500,
            "Ventilador": 60, "Estufa el√©ctrica": 2000, "Aire acondicionado 9000 BTU": 900,
            "Aire acondicionado 12000 BTU": 1200, "Bomba de agua 1/2 HP": 750,
            "Bomba de agua 1 HP": 1500, "Port√≥n el√©ctrico": 500
        }
    };

    function addRow() {
        const tbody = document.getElementById('tableBody');
        const row = document.createElement('tr');
        
        // Generar Select de Artefactos
        let artOptions = '<option value="" disabled selected>Seleccione...</option>';
        for (let cat in categorias) {
            artOptions += `<optgroup label="${cat}">`;
            for (let art in categorias[cat]) {
                artOptions += `<option value="${categorias[cat][art]}">${art}</option>`;
            }
            artOptions += `</optgroup>`;
        }

        // Generar Select de Tiempo (Minutos y Horas)
        let timeOptions = '<option value="0" selected>0 min/hrs</option>';
        timeOptions += '<optgroup label="Minutos">';
        timeOptions += '<option value="0.083">5 min</option>';
        timeOptions += '<option value="0.166">10 min</option>';
        timeOptions += '<option value="0.25">15 min</option>';
        timeOptions += '<option value="0.5">30 min</option>';
        timeOptions += '</optgroup>';
        timeOptions += '<optgroup label="Horas">';
        for (let i = 1; i <= 24; i++) {
            timeOptions += `<option value="${i}">${i} hora${i>1?'s':''}</option>`;
        }
        timeOptions += '</optgroup>';

        row.innerHTML = `
            <td><select onchange="updateWatts(this)">${artOptions}</select></td>
            <td><input type="number" value="1" min="1" oninput="calculate(this)"></td>
            <td><input type="number" value="0" oninput="calculate(this)"></td>
            <td><select onchange="calculate(this)">${timeOptions}</select></td>
            <td class="kwh-dia">0.00</td>
            <td class="kwh-mes">0.00</td>
            <td><button class="btn-del" onclick="removeRow(this)">X</button></td>
        `;
        tbody.appendChild(row);
    }

    function updateWatts(selectEl) {
        const row = selectEl.closest('tr');
        const powerInput = row.cells[2].querySelector('input');
        powerInput.value = selectEl.value;
        calculate(powerInput);
    }

    function calculate(el) {
        const row = el.closest('tr');
        const qty = parseFloat(row.cells[1].querySelector('input').value) || 0;
        const watts = parseFloat(row.cells[2].querySelector('input').value) || 0;
        const hours = parseFloat(row.cells[3].querySelector('select').value) || 0;

        const kwhDia = (qty * watts * hours) / 1000;
        const kwhMes = kwhDia * 30;

        row.querySelector('.kwh-dia').innerText = kwhDia.toFixed(3);
        row.querySelector('.kwh-mes').innerText = kwhMes.toFixed(2);

        updateTotals();
    }

function updateTotals() {
    let totalW = 0, totalD = 0, totalM = 0;
    
    // Recorremos las filas para sumar Watts totales y kWh
    document.querySelectorAll('#tableBody tr').forEach(row => {
        const qty = parseFloat(row.cells[1].querySelector('input').value) || 0;
        const watts = parseFloat(row.cells[2].querySelector('input').value) || 0;
        const kDia = parseFloat(row.querySelector('.kwh-dia').innerText) || 0;
        const kMes = parseFloat(row.querySelector('.kwh-mes').innerText) || 0;
        
        totalW += (qty * watts);
        totalD += kDia;
        totalM += kMes;
    });
    
    // Actualizar los totales de la tabla
    document.getElementById('totalDia').innerText = totalD.toFixed(3);
    document.getElementById('totalMes').innerText = totalM.toFixed(2);
    
    // Actualizar el nuevo cuadro de resumen llamativo
    document.getElementById('totalWatts').innerText = totalW.toLocaleString(); // con separador de miles
    document.getElementById('resumenDia').innerText = totalD.toFixed(2);
    document.getElementById('resumenMes').innerText = totalM.toFixed(1);

    // Actualizar los campos del formulario (Capa de datos)
    document.getElementById('formWatts').value = totalW.toLocaleString() + " W";
    document.getElementById('formKwhMes').value = totalM.toFixed(2) + " kWh/mes";
}

    function removeRow(btn) {
        btn.closest('tr').remove();
        updateTotals();
    }

    window.onload = addRow;
// UNICA FUNCI√ìN PARA CALCULAR Y MOSTRAR RESULTADOS
function nextStep() {
    const hsp = parseFloat(document.getElementById('userRegion').value);
    if (!hsp) {
        alert("Por favor, selecciona tu regi√≥n para calcular.");
        return;
    }

    // 1. Datos de entrada
    const totalWattsCarga = parseFloat(document.getElementById('formWatts').value.replace(/[^0-9.]/g, '')) || 0;
    const kwhMes = parseFloat(document.getElementById('formKwhMes').value.replace(/[^0-9.]/g, '')) || 0;
    const kwhDia = kwhMes / 30;

    // 2. Inversor: Necesitamos al menos la carga m√°xima (Inversor 10kW base si es alto)
    const potenciaInversorKW = totalWattsCarga > 5000 ? 10 : 5; 
    const costoInversor = potenciaInversorKW === 10 ? 750000 : 450000;

    // 3. Paneles (590W a $90.000)
    const potenciaInstalarWp = (kwhDia / (hsp * 0.75)) * 1000;
    const numPaneles = Math.ceil(potenciaInstalarWp / 590);
    const costoPaneles = numPaneles * 100000;

    // 4. Bater√≠as (Basado en bloques de 10kWh a $1.500.000)
    const capacidadNecesaria = kwhDia * 1.2; // 1.2 d√≠as de autonom√≠a
    const numBaterias = Math.ceil(capacidadNecesaria / 10);
    const costoBaterias = numBaterias * 1500000;

    // 5. Otros costos fijos que mencionaste
    const estructura = 200000;
    const mppt = 1200000;
    const accesorios = 300000;
    const manoObra = 1500000; // Valor estimado de instalaci√≥n

    // 6. SUMA FINAL
    const costoNeto = costoPaneles + costoBaterias + costoInversor + estructura + mppt + accesorios + manoObra;
    const costoTotalConIva = costoNeto * 1.19;

    // ACTUALIZAR INTERFAZ
    document.getElementById('resInversor').innerText = potenciaInversorKW + " kW";
    document.getElementById('resPaneles').innerText = numPaneles + " Unidades";
    document.getElementById('resBaterias').innerText = (numBaterias * 10) + " kWh";
    document.getElementById('resCosto').innerText = "$" + Math.round(costoTotalConIva).toLocaleString('es-CL');

    document.getElementById('resultadoFinal').style.display = 'block';
    document.getElementById('btnPasoContacto').style.display = 'block';
    document.getElementById('resultadoFinal').scrollIntoView({ behavior: 'smooth' });
}

// Funci√≥n para mostrar el formulario de contacto
function mostrarContacto() {
    document.getElementById('contactoFinal').style.display = 'block';
    document.getElementById('contactoFinal').scrollIntoView({ behavior: 'smooth' });
}
// Nueva funci√≥n para mostrar el formulario final
function mostrarContacto() {
    document.getElementById('contactoFinal').style.display = 'block';
    document.getElementById('contactoFinal').scrollIntoView({ behavior: 'smooth' });
}

// Manejo del env√≠o del formulario
document.getElementById('leadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    alert("¬°Muchas gracias! Hemos recibido tu solicitud. Un especialista se contactar√° contigo en el horario preferido.");
    // Aqu√≠ podr√≠as integrar el env√≠o real a tu correo o base de datos
});
const menuBtn = document.getElementById('mobile-menu');
const navList = document.getElementById('nav-list');

if (menuBtn && navList) {
    menuBtn.addEventListener('click', () => {
        navList.classList.toggle('active');
        const icon = menuBtn.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
    });
}
window.addEventListener("load", function() {
    const loader = document.getElementById("loader-wrapper");
    // Agregamos una peque√±a demora de 500ms para que se alcance a ver el efecto
    setTimeout(() => {
        loader.classList.add("loader-hidden");
    }, 500);
});
</script>
<a href="https://wa.me/5693220000" class="whatsapp-btn" target="_blank" rel="noopener noreferrer">
    <i class="fab fa-whatsapp"></i>
    <span class="tooltip-wsp">¬øNecesitas ayuda?</span>
</a>
</body>
</html>
